<!DOCTYPE html>
<html lang="en-us">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.15" />
    <title>Allan&#39;s blog</title>
    
    
    
    <meta name="description" content="" />
    <meta name="keywords" content='linux,architect,python,rust,php,rest' />
    
    
    <link href="http://allan-simon.github.io/blog/index.xml" rel="alternate" type="application/rss+xml" title="Allan&#39;s blog" />
    <link rel="stylesheet" href="http://allan-simon.github.io/blog//css/bootstrap.min.css" />
    <link rel="stylesheet" href="http://allan-simon.github.io/blog//css/highlightjs-themes/androidstudio.css" />
    <link rel="stylesheet" href="http://allan-simon.github.io/blog//css/font-awesome.min.css" />
    <link rel="stylesheet" href="http://allan-simon.github.io/blog//css/phlat.css" />
</head>

    <body>
        <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://allan-simon.github.io/blog/">Allan&#39;s blog</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                
            </ul>
        </div>
    </div>
</nav>

        <div id="top" class="container">
            <div class="row" id="content-main">
                <div class="col-md-8">
                    
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/vagrant-with-ansible-provisionning-docker-containers-for-symfony2/">vagrant with ansible provisionning docker containers for symfony2</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>April 12, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>In this article we&rsquo;re going to cover:</p>

<ul>
<li>How to use ansible+docker+vagrant to create a one size for all environment for Symfony2 + Nginx + Postgresql + PHP-fpm</li>
<li>How to transition an existing application to fit in that new environment</li>
</ul>

<p>This article take the assumption that you have already heard about all the technologies above without being too familiar with them.</p>

<p>As an example will take the existing Oauth2 server I have created: <a href="https://github.com/allan-simon/oauth2-symfony2-vagrant-fosuserbundle">Oauth2Symfony2</a></p>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/vagrant-with-ansible-provisionning-docker-containers-for-symfony2/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/doctrine2-order-by-count-many-to-many/">doctrine2 order by count many to many</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>April 9, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>Today I found a problem quite common but tricky enough for the solution
to share it with you</p>

<h3 id="the-problem:fcd569fc48e65a7020df74b8509a5751">The problem</h3>

<p>I have 2 Entities</p>

<ul>
<li>User</li>
<li>Article</li>
</ul>

<p>and a &ldquo;likedByUsers&rdquo; Many To Many relationship between both</p>

<p>Now I would like to get the Articles ordered by number of &lsquo;likes&rsquo;
for an API call returning a list of Articles</p>

<p>if you feel smart you can try to find the solution by yourself
it&rsquo;s an interesting exercise about &lsquo;how much do you know doctrine and SQL&rsquo;</p>

<p>but let me tell you, the solution is like an Egg of Columbus, once you see
it it becomes evident, but it was actually not that simple at first.</p>

<h3 id="the-solution:fcd569fc48e65a7020df74b8509a5751">The solution</h3>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/doctrine2-order-by-count-many-to-many/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/gitlab-ci-with-docker-runner/">gitlab ci with docker runner</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>March 29, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>In my company we&rsquo;re using <a href="https://gitlab.com">Gitlab</a> for managing our code
and doing code review. For the last months we&rsquo;ve been standardizing our stack
on Symfony/Postgresql/php-fpm. Recently we&rsquo;ve started automatizing our tests
using phpunit. The next step was of course to have a start of continuous
integration and to be able to run our tests at each Merge request.</p>

<p>In this article we&rsquo;re going to view</p>

<ul>
<li>How to install gitlab-ci on a separate server than your gitlab instance</li>
<li>How to put gitlab-ci behind your company frontal server</li>
<li>How to make gitlab-ci run your tests in a Docker container</li>
</ul>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/gitlab-ci-with-docker-runner/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/symfony-create-your-own-third-party-bundle/">symfony create your own third party bundle part 1/4</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>March 28, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>So you&rsquo;ve reached the point where you&rsquo;re reusing the same service accross
symfony application, again and again and you feel like this could even
be useful for other people. You decide that it will be great if you could
do like adults and have your own bundle.</p>

<p>Here is how to create one from scratch, you can find the repo here <a href="https://travis-ci.org/we-bridge/OAuth2AccessBundle">Oauth2AccessBundle</a></p>

<p>we cover these steps:</p>

<ol>
<li>Creating the base repo in github and composer.json</li>
<li>Adding the base Classes</li>
<li>Permit users of your bundle to configure it</li>
<li>Make your bundle testable</li>
</ol>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/symfony-create-your-own-third-party-bundle/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/migrate-down-with-doctrine-migrations/">migrate down with doctrine migrations</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>March 14, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>if you&rsquo;re using Doctrine in your Symfony2 project, you&rsquo;re certainly using the
excellent <a href="http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html">Doctrine Migration Bundle</a>
but you may have seen that documentation is not staging clearly how to migrate down</p>

<p>for that:</p>

<pre><code>php app/console doctrine:migrations:status

</code></pre>

<p>take the number in &ldquo;Current Version&rdquo; (format YYYYMMDDHHMMSS)</p>

<p>and then run</p>

<pre><code>php app/console doctrine:migrations:execute YYYYMMDDHHMMSS --down
</code></pre>

<p>that&rsquo;s all folks !</p>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/migrate-down-with-doctrine-migrations/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/symfony-2.6-tips-1/">symfony 2.6 tips #1</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>March 11, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>Here a list of tips for symfony 2.6 I&rsquo;ve gathered these days</p>

<ul>
<li>how to skip test in phpunit</li>
<li>how to disable form validation in test</li>
<li>(Doctrine) don&rsquo;t use findById() when you just mean find()</li>
</ul>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/symfony-2.6-tips-1/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/redmine-cli/">Redmine-cli and redmine API</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>February 25, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>I found a tool to manage redmine from the cli, in python:</p>

<p><code>pip install redmine-cli</code></p>

<p>then a config file <code>~/.redmine-cli</code></p>

<pre><code>[default]
key=API_KEY_YOU_CAN_SEE_IN_YOUR_ACCOUNT_ON_REDMINE
my_id=ID_YOU_CAN_ON_YOUR_PROFILE_PAGE
root_url=HOME_PAGE_OF_REDMINE
</code></pre>

<p>then you can do</p>

<ol>
<li><code>redmine open 123</code> to open the issue 123 in your browser</li>
<li><code>redmine issues</code> to see your issues</li>
<li><code>redmine issue 123</code> to see information about issue 123</li>
</ol>

<p>(it has more options I let you check the doc)</p>

<ul>
<li><a href="https://github.com/yanjost/redmine-cli">original repo</a></li>
<li><a href="https://github.com/allan-simon/redmine-cli">my fork where I have some features (like updating a ticket</a></li>
</ul>

<p>(hopefully my modification are in PR on the original repo and will be soon integrated)
my modification include so far:</p>

<ul>
<li><code>redmine issue 123 long</code> to see more detailled information about the issue</li>
<li><code>redmine update 123 'in progress'</code> to update the status to <code>in progress</code> (admitting your redmine has this status)</li>
</ul>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/redmine-cli/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/form-name-goes-into-global-scope-javascript/">Form name goes into global scope in javascript</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>February 23, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>An interesting problem a friend of mine discovered today</p>

<p>Can you spot the problem?</p>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/form-name-goes-into-global-scope-javascript/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/workflow-publishing-blog-post-with-hugo/">Workflow publishing blog post with hugo</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>February 20, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>I&rsquo;ve added some functions in my shell to make it even more convenient
to write/edit/publish articles with <code>hugo</code> (just a self reminder)</p>

<p>so that now I have</p>

<ul>
<li><code>new_blog_post name-of-your-blog-post</code></li>
<li><code>publish_blog</code></li>
<li><code>edit_last_blog_post</code></li>
</ul>

<p>that can be run from anywhere in my terminal</p>

<pre><code>export BLOG_ROOT=~/git/perso/blog
export BLOG_THEME=hyde
export GITHUB=git@github.com:allan-simon/blog.git

function new_blog_post {
    cd $BLOG_ROOT
    LAST_BLOG_POST=$(hugo new posts/$1.md | cut -d &quot; &quot; -f 1) ;
    export LAST_BLOG_POST ;
    $EDITOR $LAST_BLOG_POST
    cd -
}

function publish_blog {
    cd $BLOG_ROOT;
    hugo --theme=&quot;$BLOG_THEME&quot; --buildDrafts &amp;&amp; \
    git add -A &amp;&amp;  \
    git commit -m &quot;Updating site&quot; &amp;&amp; \
    git push origin master &amp;&amp; \
    git subtree push --prefix=public $GITHUB gh-pages --squash  &amp;&amp; \
    echo &quot;published&quot;
    cd $BLOG_ROOT
}

function edit_last_blog_post {
    $EDITOR $LAST_BLOG_POST
}
</code></pre>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/workflow-publishing-blog-post-with-hugo/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/functionnal-tests-symfony2-and-authentication/">Functionnal tests in symfony2 with authentication</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>February 20, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>Let&rsquo;s say you have your symfony2 website, all setup correctly with its
set of functionnal tests using phpunit, and now you start to have
pages that only authenticated users can access to. My first solution was to
create a client, make it load the login form, submit some valid credentials
and then load the actual page to test. It was working fine as the client
has a storage for cookie, it is acting like an actual browser in that case.</p>

<p>The problem was that the time to execute the test was much longer, which
started to become a problem has the test suite was growing.</p>

<p>The first trick is to follow them method adviced by symfony, which is for the
test environnement to enable the HTTP Basic Authentication method. For those
who doesn&rsquo;t know, the HTTP standard comme with a method to authentify a
user-agent by directly sending the username/password in the HTTP header
(which goes along the fact that HTTP is aimed to be stateless)</p>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/functionnal-tests-symfony2-and-authentication/" role="button">Read More</a>
                            </div>
                        </div>
                    
                    
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-4" style="text-align: left; padding-left: 0px">
                    
                        <a class="btn btn-default" href="/" role="button" style="border-radius: 0px; display: block">Newer</a>
                    
                </div>
                <div class="col-md-4 col-md-offset-4" style="text-align: right; padding-right: 0px">
                    
                        <a class="btn btn-default" href="/page/3/" role="button" style="border-radius: 0px; display: block">Older</a>
                    
                </div>
            </div>
        </div>
    </div>


                </div>
                <div class="col-md-4">
                    <div class="row">
    <div class="col-md-11 col-md-offset-1 card">
        <h5>Search</h5>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
            <div class="input-group">
                <input class="form-control" type="search" name="q" />
                <span class="input-group-btn">
                    <button class="btn btn-custom" type="submit"><span class="glyphicon glyphicon-search"></span></button>
                </span>
            </div>
            <input type="hidden" name="q" value="site:http://allan-simon.github.io/blog/">
        </form>
    </div>
</div>

                    <div class="row">
    <div class="col-md-11 col-md-offset-1 card">
        <h5>Recent Posts</h5>
        <ul class="list-unstyled posts-recent">
            
                <li><a href="http://allan-simon.github.io/blog/posts/get-http-status-code-in-bash-script-wit-curl/">get http status code in bash script wit curl</a></li>
            
                <li><a href="http://allan-simon.github.io/blog/posts/some-reading-for-better-understanding-of-postgresql/">some reading for better understanding of postgresql</a></li>
            
                <li><a href="http://allan-simon.github.io/blog/posts/alembic-use-sql-statement-instead-of-sqlalchemy/">alembic use sql statement instead of sqlalchemy</a></li>
            
                <li><a href="http://allan-simon.github.io/blog/posts/python-alembic-with-environment-variables/">python alembic with environment variables</a></li>
            
                <li><a href="http://allan-simon.github.io/blog/posts/how-to-sum-all-numbers-in-file-in-bash/">how to sum all numbers in file in bash</a></li>
            
        </ul>
    </div>
</div>

                    
    
        <div class="row">
            <div class="col-md-11 col-md-offset-1 card">
                <h5>categories</h5>
                <ul class="list-unstyled posts-recent">
                    
                </ul>
            </div>
        </div>
    

    


                </div>
            </div>
        </div>
        <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-8 col-xs-6">
    <ul class="list-inline links">
        
    </ul>
</div>

            <div class="col-md-4 col-xs-6">
    <ul class="list-inline social-media">
        
        
        
        
        
        
        
        
        
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-md-12">
                <p>
                    <a href="https://github.com/nraboy/hugo-phlat-theme">Phlat Theme</a> designed and built by <a href="http://www.nraboy.com">Nic Raboy</a> in San Francisco, California.
                </p>
            </div>
        </div>
    </div>
</footer>

        <div id="back-to-top" class="hidden">
    <a href="#top" class="well well-sm" onclick="$('html,body').animate({scrollTop:0},'slow');return false;">
        <i class="glyphicon glyphicon-chevron-up"></i> Back to Top
    </a>
</div>
<script src="http://allan-simon.github.io/blog//js/jquery-2.2.1.min.js"></script>
<script src="http://allan-simon.github.io/blog//js/bootstrap.min.js"></script>
<script src="http://allan-simon.github.io/blog//js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
    if(($(window).height() + 100) < $(document).height()) {
        $('#back-to-top').removeClass('hidden').affix({
            offset: {
                top: 100
            }
        });
    }
</script>

    



    </body>
</html>

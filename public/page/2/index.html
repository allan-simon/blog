<!DOCTYPE html>
<html lang="en-us">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.15" />
    <title>Allan&#39;s blog</title>
    
    
    
    <meta name="description" content="" />
    <meta name="keywords" content='linux,architect,python,rust,php,rest' />
    
    
    <link href="http://allan-simon.github.io/blog/index.xml" rel="alternate" type="application/rss+xml" title="Allan&#39;s blog" />
    <link rel="stylesheet" href="http://allan-simon.github.io/blog//css/bootstrap.min.css" />
    <link rel="stylesheet" href="http://allan-simon.github.io/blog//css/highlightjs-themes/androidstudio.css" />
    <link rel="stylesheet" href="http://allan-simon.github.io/blog//css/font-awesome.min.css" />
    <link rel="stylesheet" href="http://allan-simon.github.io/blog//css/phlat.css" />
</head>

    <body>
        <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://allan-simon.github.io/blog/">Allan&#39;s blog</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                
            </ul>
        </div>
    </div>
</nav>

        <div id="top" class="container">
            <div class="row" id="content-main">
                <div class="col-md-8">
                    
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/create-a-rest-api-with-symfony2/">Create a production ready rest api with symfony2 (part 1)</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>May 23, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>What will we cover:</p>

<ul>
<li>how to transform a just-started symfony project into a REST-ready project</li>
<li>how to configure and use the FOSRestBundle to help us in that task</li>
<li>How to use Doctrine migrations to easily transition your database from version N to version N+1</li>
<li>how to add functionnal tests to automatically check your API</li>
<li>how to configure and use the JMSSerializer to automagically serialize and unseralize your data into json (or xml)</li>
<li>How to plug your API to a Oauth2 service</li>
<li>mixed in between some generic advices to make your API reality proof</li>
<li>practical examples of common &ldquo;tricky things&rdquo; (Image uploading / pagination / association between resources etc.)</li>
</ul>

<p>Here we suppose you&rsquo;re already familiar with what a REST API <strong>exactly</strong> means,
and I really mean the emphasis in <strong>exactly</strong></p>

<p>for this I urge you to read these links:</p>

<ul>
<li><a href="http://martinfowler.com/articles/richardsonMaturityModel.html">http://martinfowler.com/articles/richardsonMaturityModel.html</a></li>

<li><p><a href="http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http">http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http</a></p></li>

<li><p><a href="https://github.com/interagent/http-api-design">https://github.com/interagent/http-api-design</a></p></li>

<li><p><a href="www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api">www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api</a></p></li>
</ul>

<p>An API is made to resist the test of time, so you can really afford to spend one or
two hours to carefully read these links.</p>

<h3 id="example-project:a54943db4d72a4144ed4e4c7803550cc">Example project</h3>

<p>All the steps described here are applied in this toy project
<a href="https://github.com/allan-simon/symfony2-rest-api-example">https://github.com/allan-simon/symfony2-rest-api-example</a></p>

<p>It&rsquo;s a Blog-like services with a REST API in json at the end it will permit</p>

<ul>
<li>Multiple Authors</li>
<li>Possiblity to add/edit/delete articles</li>
<li>Possibility to comments</li>
<li>Creation of tags to category articles</li>
</ul>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/create-a-rest-api-with-symfony2/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/things-i-ve-learn-this-week/">Things I&#39;ve learn this week</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>May 12, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>More than often I find myself trying to remember how did i solve that very one problem I thought I would have to solve only once, so I decided to start writing their solution here:</p>

<pre><code>* How to reload PHP-fpm without restarting it
* How to send the unchanged Host header to proxied server with Nginx
</code></pre>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/things-i-ve-learn-this-week/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/vagrant-with-ansible-provisionning-docker-containers-for-symfony2/">vagrant with ansible provisionning docker containers for symfony2</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>April 12, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>In this article we&rsquo;re going to cover:</p>

<ul>
<li>How to use ansible+docker+vagrant to create a one size for all environment for Symfony2 + Nginx + Postgresql + PHP-fpm</li>
<li>How to transition an existing application to fit in that new environment</li>
</ul>

<p>This article take the assumption that you have already heard about all the technologies above without being too familiar with them.</p>

<p>As an example will take the existing Oauth2 server I have created: <a href="https://github.com/allan-simon/oauth2-symfony2-vagrant-fosuserbundle">Oauth2Symfony2</a></p>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/vagrant-with-ansible-provisionning-docker-containers-for-symfony2/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/doctrine2-order-by-count-many-to-many/">doctrine2 order by count many to many</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>April 9, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>Today I found a problem quite common but tricky enough for the solution
to share it with you</p>

<h3 id="the-problem:fcd569fc48e65a7020df74b8509a5751">The problem</h3>

<p>I have 2 Entities</p>

<ul>
<li>User</li>
<li>Article</li>
</ul>

<p>and a &ldquo;likedByUsers&rdquo; Many To Many relationship between both</p>

<p>Now I would like to get the Articles ordered by number of &lsquo;likes&rsquo;
for an API call returning a list of Articles</p>

<p>if you feel smart you can try to find the solution by yourself
it&rsquo;s an interesting exercise about &lsquo;how much do you know doctrine and SQL&rsquo;</p>

<p>but let me tell you, the solution is like an Egg of Columbus, once you see
it it becomes evident, but it was actually not that simple at first.</p>

<h3 id="the-solution:fcd569fc48e65a7020df74b8509a5751">The solution</h3>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/doctrine2-order-by-count-many-to-many/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/gitlab-ci-with-docker-runner/">gitlab ci with docker runner</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>March 29, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>In my company we&rsquo;re using <a href="https://gitlab.com">Gitlab</a> for managing our code
and doing code review. For the last months we&rsquo;ve been standardizing our stack
on Symfony/Postgresql/php-fpm. Recently we&rsquo;ve started automatizing our tests
using phpunit. The next step was of course to have a start of continuous
integration and to be able to run our tests at each Merge request.</p>

<p>In this article we&rsquo;re going to view</p>

<ul>
<li>How to install gitlab-ci on a separate server than your gitlab instance</li>
<li>How to put gitlab-ci behind your company frontal server</li>
<li>How to make gitlab-ci run your tests in a Docker container</li>
</ul>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/gitlab-ci-with-docker-runner/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/symfony-create-your-own-third-party-bundle/">symfony create your own third party bundle part 1/4</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>March 28, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>So you&rsquo;ve reached the point where you&rsquo;re reusing the same service accross
symfony application, again and again and you feel like this could even
be useful for other people. You decide that it will be great if you could
do like adults and have your own bundle.</p>

<p>Here is how to create one from scratch, you can find the repo here <a href="https://travis-ci.org/we-bridge/OAuth2AccessBundle">Oauth2AccessBundle</a></p>

<p>we cover these steps:</p>

<ol>
<li>Creating the base repo in github and composer.json</li>
<li>Adding the base Classes</li>
<li>Permit users of your bundle to configure it</li>
<li>Make your bundle testable</li>
</ol>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/symfony-create-your-own-third-party-bundle/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/migrate-down-with-doctrine-migrations/">migrate down with doctrine migrations</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>March 14, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>if you&rsquo;re using Doctrine in your Symfony2 project, you&rsquo;re certainly using the
excellent <a href="http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html">Doctrine Migration Bundle</a>
but you may have seen that documentation is not staging clearly how to migrate down</p>

<p>for that:</p>

<pre><code>php app/console doctrine:migrations:status

</code></pre>

<p>take the number in &ldquo;Current Version&rdquo; (format YYYYMMDDHHMMSS)</p>

<p>and then run</p>

<pre><code>php app/console doctrine:migrations:execute YYYYMMDDHHMMSS --down
</code></pre>

<p>that&rsquo;s all folks !</p>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/migrate-down-with-doctrine-migrations/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/symfony-2.6-tips-1/">symfony 2.6 tips #1</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>March 11, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>Here a list of tips for symfony 2.6 I&rsquo;ve gathered these days</p>

<ul>
<li>how to skip test in phpunit</li>
<li>how to disable form validation in test</li>
<li>(Doctrine) don&rsquo;t use findById() when you just mean find()</li>
</ul>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/symfony-2.6-tips-1/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/redmine-cli/">Redmine-cli and redmine API</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>February 25, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>I found a tool to manage redmine from the cli, in python:</p>

<p><code>pip install redmine-cli</code></p>

<p>then a config file <code>~/.redmine-cli</code></p>

<pre><code>[default]
key=API_KEY_YOU_CAN_SEE_IN_YOUR_ACCOUNT_ON_REDMINE
my_id=ID_YOU_CAN_ON_YOUR_PROFILE_PAGE
root_url=HOME_PAGE_OF_REDMINE
</code></pre>

<p>then you can do</p>

<ol>
<li><code>redmine open 123</code> to open the issue 123 in your browser</li>
<li><code>redmine issues</code> to see your issues</li>
<li><code>redmine issue 123</code> to see information about issue 123</li>
</ol>

<p>(it has more options I let you check the doc)</p>

<ul>
<li><a href="https://github.com/yanjost/redmine-cli">original repo</a></li>
<li><a href="https://github.com/allan-simon/redmine-cli">my fork where I have some features (like updating a ticket</a></li>
</ul>

<p>(hopefully my modification are in PR on the original repo and will be soon integrated)
my modification include so far:</p>

<ul>
<li><code>redmine issue 123 long</code> to see more detailled information about the issue</li>
<li><code>redmine update 123 'in progress'</code> to update the status to <code>in progress</code> (admitting your redmine has this status)</li>
</ul>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/redmine-cli/" role="button">Read More</a>
                            </div>
                        </div>
                    
                        <div class="row">
                            <div class="col-md-12 content-card">
                                <h1><a href="http://allan-simon.github.io/blog/posts/form-name-goes-into-global-scope-javascript/">Form name goes into global scope in javascript</a></h1>
                                <ul class="list-inline">
                                    <li><i class="fa fa-calendar"></i>February 23, 2015</li>
                                    <li><i class="fa fa-user"></i></li>
                                </ul>
                                <p>An interesting problem a friend of mine discovered today</p>

<p>Can you spot the problem?</p>

                                <a class="btn btn-custom" href="http://allan-simon.github.io/blog/posts/form-name-goes-into-global-scope-javascript/" role="button">Read More</a>
                            </div>
                        </div>
                    
                    
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-4" style="text-align: left; padding-left: 0px">
                    
                        <a class="btn btn-default" href="/blog//" role="button" style="border-radius: 0px; display: block">Newer</a>
                    
                </div>
                <div class="col-md-4 col-md-offset-4" style="text-align: right; padding-right: 0px">
                    
                        <a class="btn btn-default" href="/blog//page/3/" role="button" style="border-radius: 0px; display: block">Older</a>
                    
                </div>
            </div>
        </div>
    </div>


                </div>
                <div class="col-md-4">
                    <div class="row">
    <div class="col-md-11 col-md-offset-1 card">
        <h5>Search</h5>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
            <div class="input-group">
                <input class="form-control" type="search" name="q" />
                <span class="input-group-btn">
                    <button class="btn btn-custom" type="submit"><span class="glyphicon glyphicon-search"></span></button>
                </span>
            </div>
            <input type="hidden" name="q" value="site:http://allan-simon.github.io/blog/">
        </form>
    </div>
</div>

                    <div class="row">
    <div class="col-md-11 col-md-offset-1 card">
        <h5>Recent Posts</h5>
        <ul class="list-unstyled posts-recent">
            
                <li><a href="http://allan-simon.github.io/blog/posts/better-null-display-psql.md/">better null display psql.md</a></li>
            
                <li><a href="http://allan-simon.github.io/blog/posts/check-start-time-before-end-time-in-postgresql/">check start time before end time in postgresql</a></li>
            
                <li><a href="http://allan-simon.github.io/blog/posts/get-http-status-code-in-bash-script-wit-curl/">get http status code in bash script wit curl</a></li>
            
                <li><a href="http://allan-simon.github.io/blog/posts/some-reading-for-better-understanding-of-postgresql/">some reading for better understanding of postgresql</a></li>
            
                <li><a href="http://allan-simon.github.io/blog/posts/alembic-use-sql-statement-instead-of-sqlalchemy/">alembic use sql statement instead of sqlalchemy</a></li>
            
        </ul>
    </div>
</div>

                    
    
        <div class="row">
            <div class="col-md-11 col-md-offset-1 card">
                <h5>categories</h5>
                <ul class="list-unstyled posts-recent">
                    
                </ul>
            </div>
        </div>
    

    


                </div>
            </div>
        </div>
        <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-8 col-xs-6">
    <ul class="list-inline links">
        
    </ul>
</div>

            <div class="col-md-4 col-xs-6">
    <ul class="list-inline social-media">
        
        
        
        
        
        
        
        
        
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-md-12">
                <p>
                    <a href="https://github.com/nraboy/hugo-phlat-theme">Phlat Theme</a> designed and built by <a href="http://www.nraboy.com">Nic Raboy</a> in San Francisco, California.
                </p>
            </div>
        </div>
    </div>
</footer>

        <div id="back-to-top" class="hidden">
    <a href="#top" class="well well-sm" onclick="$('html,body').animate({scrollTop:0},'slow');return false;">
        <i class="glyphicon glyphicon-chevron-up"></i> Back to Top
    </a>
</div>
<script src="http://allan-simon.github.io/blog//js/jquery-2.2.1.min.js"></script>
<script src="http://allan-simon.github.io/blog//js/bootstrap.min.js"></script>
<script src="http://allan-simon.github.io/blog//js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
    if(($(window).height() + 100) < $(document).height()) {
        $('#back-to-top').removeClass('hidden').affix({
            offset: {
                top: 100
            }
        });
    }
</script>

    



    </body>
</html>
